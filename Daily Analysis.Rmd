---
title: "Daily Analysis"
author: "Cam Smithers"
output: html_document
date: "`r Sys.Date()`"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Team Daily Analysis

## Win Loss Models

### Version 1: Average Offensive & Defensive Rating

```{r}
winloss_daily_analysis <- all_team_data %>%
    select(team_date, team_team, team_home, avg_team_offrating, avg_team_defrating, 
           team_opponent, avg_opponent_team_offrating, avg_opponent_team_defrating, winloss_team_prob) %>%
    filter(team_date == Sys.Date())
```

### Version 3: Average Offensive, Defensive Rating, and Upset Rate

```{r}
winloss_v3_daily_analysis <- all_team_data %>%
    select(team_date, team_team, team_home, avg_team_offrating, avg_team_defrating, 
           team_opponent, avg_opponent_team_offrating, avg_opponent_team_defrating,
           team_upset_cumsum_rate, winloss_v3_team_prob) %>%
    filter(team_date == Sys.Date())
```


## Upset Models

### Version 1: Spread & Overall Upset Rate

```{r}
upset_daily_analysis <- all_team_data %>%
    select(team_date, team_team, team_home, team_opponent, team_favored, 
           team_upset_gen_rate, team_spread, upset_team_prob) %>%
    filter(team_date == Sys.Date())
```

### Version  2: Spread & Moving Upset Rate

```{r}
upset_v2_daily_analysis <- all_team_data %>%
    select(team_date, team_team, team_home, team_opponent, team_favored, 
           team_upset_cumsum_rate, team_spread, upset_v2_team_prob) %>%
    filter(team_date == Sys.Date())
```


## Close Win Models

### Version 1: Average Net Rating

```{r}
close_win_daily_analysis <- all_team_data %>%
    select(team_date, team_team, team_home, avg_team_netrating, team_opponent, 
           avg_opponent_team_netrating, close_win_prob) %>%
    filter(team_date == Sys.Date())
```

### Version 3: Average Net Rating & Moving Close Win Rate

```{r}
close_win_v3_daily_analysis <- all_team_data %>%
    select(team_date, team_team, team_home, avg_team_netrating, team_opponent, 
           avg_opponent_team_netrating, team_close_win_cumsum_rate, close_win_v3_prob) %>%
    filter(team_date == Sys.Date())
```

# Team Models Data Frame

```{r}
daily_team_outcomes <- all_team_data %>%
    select(team_date, team_home, team_team, team_favored, team_opponent, winloss_team_prob, 
          close_win_v3_prob, upset_v2_team_prob) %>%
    filter(team_date == Sys.Date())
```



------------------------------------------------------------------------

## Variables for Exportation

```{r}
current_date <- format(Sys.Date(), "%m_%d_%y")
```


## Team CSV Files

```{r}
#WinLoss 1
write_csv(winloss_daily_analysis, 
          paste0("/Users/camsmithers/Desktop/NBA Project/Main/Model Predictions/WinLoss1/winloss1_", current_date, ".csv"))

#WinLoss 3
write_csv(winloss_v3_daily_analysis, 
          paste0("/Users/camsmithers/Desktop/NBA Project/Main/Model Predictions/WinLoss3/winloss3_", current_date, ".csv"))

#Upset 1
write_csv(upset_daily_analysis, 
          paste0("/Users/camsmithers/Desktop/NBA Project/Main/Model Predictions/Upset1/upset1_", current_date, ".csv"))
#Upset 2
write_csv(upset_v2_daily_analysis, 
          paste0("/Users/camsmithers/Desktop/NBA Project/Main/Model Predictions/Upset2/upset2_", current_date, ".csv"))

#Close Win 1
write_csv(close_win_daily_analysis, 
          paste0("/Users/camsmithers/Desktop/NBA Project/Main/Model Predictions/CloseWin1/closewin1_", current_date, ".csv"))

#Close Win 3
write_csv(close_win_v3_daily_analysis, 
          paste0("/Users/camsmithers/Desktop/NBA Project/Main/Model Predictions/CloseWin3/closewin3_", current_date, ".csv"))

```
